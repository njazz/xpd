<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>XPD: Matchers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">XPD
   </div>
   <div id="projectbrief">C/C++ wrapper for PureData</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Matchers </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Matchers are an alternative way to do assertions which are easily extensible and composable. This makes them well suited to use with more complex types (such as collections) or your own custom types. Matchers were first popularised by the <a href="https://en.wikipedia.org/wiki/Hamcrest">Hamcrest</a> family of frameworks.</p>
<h2>In use</h2>
<p>Matchers are introduced with the <code>REQUIRE_THAT</code> or <code>CHECK_THAT</code> macros, which take two arguments. The first argument is the thing (object or value) under test. The second part is a match <em>expression</em>, which consists of either a single matcher or one or more matchers combined using <code>&amp;&amp;</code>, <code>||</code> or <code>!</code> operators.</p>
<p>For example, to assert that a string ends with a certain substring:</p>
<p>```c++ std::string str = getStringFromSomewhere(); REQUIRE_THAT( str, EndsWith( "as a service" ) ); ```</p>
<p>The matcher objects can take multiple arguments, allowing more fine tuning. The built-in string matchers, for example, take a second argument specifying whether the comparison is case sensitive or not:</p>
<p>```c++ REQUIRE_THAT( str, EndsWith( "as a service", Catch::CaseSensitive::No ) ); ```</p>
<p>And matchers can be combined:</p>
<p>```c++ REQUIRE_THAT( str, EndsWith( "as a service" ) || (StartsWith( "Big data" ) &amp;&amp; !Contains( "web scale" ) ) ); ```</p>
<h2>Built in matchers</h2>
<p>Currently Catch has some string matchers and some vector matchers. The string matchers are <code>StartsWith</code>, <code>EndsWith</code>, <code>Contains</code> and <code>Equals</code>. Each of them also takes an optional second argument, that decides case sensitivity (by-default, they are case sensitive). The vector matchers are <code>Contains</code>, <code>VectorContains</code> and <code>Equals</code>. <code>VectorContains</code> looks for a single element in the matched vector, <code>Contains</code> looks for a set (vector) of elements inside the matched vector.</p>
<h2>Custom matchers</h2>
<p>It's easy to provide your own matchers to extend Catch or just to work with your own types.</p>
<p>You need to provide two things:</p>
<ol type="1">
<li>A matcher class, derived from <code>Catch::MatcherBase&lt;T&gt;</code> - where <code>T</code> is the type being tested. The constructor takes and stores any arguments needed (e.g. something to compare against) and you must override two methods: <code>match()</code> and <code>describe()</code>.</li>
<li>A simple builder function. This is what is actually called from the test code and allows overloading.</li>
</ol>
<p>Here's an example for asserting that an integer falls within a given range (note that it is all inline for the sake of keeping the example short):</p>
<p>```c++ // The matcher class class IntRange : public Catch::MatcherBase&lt;int&gt; { int m_begin, m_end; public: IntRange( int begin, int end ) : m_begin( begin ), m_end( end ) {}</p>
<p>// Performs the test for this matcher virtual bool match( int const&amp; i ) const override { return i &gt;= m_begin &amp;&amp; i &lt;= m_end; }</p>
<p>// Produces a string describing what this matcher does. It should // include any provided data (the begin/ end in this case) and // be written as if it were stating a fact (in the output it will be // preceded by the value under test). virtual std::string describe() const { std::ostringstream ss; ss &lt;&lt; "is between " &lt;&lt; m_begin &lt;&lt; " and " &lt;&lt; m_end; return ss.str(); } };</p>
<p>// The builder function inline IntRange IsBetween( int begin, int end ) { return IntRange( begin, end ); }</p>
<p>// ...</p>
<p>// Usage TEST_CASE("Integers are within a range") { CHECK_THAT( 3, IsBetween( 1, 10 ) ); CHECK_THAT( 100, IsBetween( 1, 10 ) ); } ```</p>
<p>Running this test gives the following in the console:</p>
<p>``` /**/TestFile.cpp:123: FAILED: CHECK_THAT( 100, IsBetween( 1, 10 ) ) with expansion: 100 is between 1 and 10 ``` </p>
<hr/>
<p><a href="Readme.md">Home</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jan 25 2018 17:46:47 for XPD by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
